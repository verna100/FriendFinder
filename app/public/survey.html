<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Survey page</title>
  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>
<div class ="container">
    <h2>Survey Questions</h2>
    <hr>
    <h3><strong>About You</strong></h3>
    <h4>Name (Required)</h4>
    <input type ="text" id="name" class="form-control" required>
    <h4>Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required>
    <hr>

    <h3 id ="q1"><strong>Question 1</strong></h3>
    <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
    <select id="q-1" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option>Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3 id="q2"><strong>Question 2</strong></h3>
    <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
    <select id="q-2" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q2">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 3</strong></h3>
    <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
    <select id="q-3" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "scores">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 4</strong></h3>
    <h4>You rarely do something just out of sheer curiosity.</h4>
    <select id="q-4" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q4">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 5</strong></h3>
    <h4>People can rarely upset you.</h4>
    <select id="q-5" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q5">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 6</strong></h3>
    <h4>It is often difficult for you to relate to other people’s feelings.</h4>
    <select id="q-6" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q6">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 7</strong></h3>
    <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
    <select id="q-7" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q7">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 8</strong></h3>
    <h4>You rarely get carried away by fantasies and ideas.</h4>
    <select id="q-8" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q8">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 9</strong></h3>
    <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
    <select id="q-9" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q9">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

    <h3><strong>Question 10</strong></h3>
    <h4>You feel more energetic after spending time with a group of people.</h4>
    <select id="q-10" class="form-control form-control-chosen" data-placeholder="Select an Option">
    <option id = "q10">Select an Option</option>
    <option value ="1">1 (Strongly Agree)</option>
    <option value ="2">2</option>
    <option value ="3">3</option>
    <option value= "4">4</option>
    <option value= "5">5 (Strongly Disagree)</option>
    </select>
    <br>

</div>

<button type ="submit" class ="btn btn-primary btn-lg btn-block" id ="submit">
        <i class = "fa fa-check-circle" aria-hidden= "true"></i> Submit
    </button>

<footer class="footer">
    <div class="container">
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/verna100/FriendFinder" alt="Github Repo">Gitub Repo</a>
    </div>
</footer>

<!-- Modal -->
<div id="results-modal" class="modal fade" role="dialog">
  <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h2 class="modal-title">
                  <strong>Best Match</strong>
              </h2>
          </div>
          <div class="modal-body">
              <h2 id="match-name"></h2>
              <img id="match-img" src="" alt="">
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
      </div>

  </div>
</div>
    

<script type="text/javascript">
 // Capture the form inputs
 $("#submit").on("click", function(event) {
      event.preventDefault();
  // Form validation
      function validateForm() {
        var isValid = true;
        $(".form-control").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });
        $(".form-control form-control-chosen").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });
        return isValid;
      }
    //   // If all required fields are filled
      if (validateForm()) {
        // Create an object for the user
        var userData = {
          name: $("#name").val(),
          photo: $("#photo").val(),
          scores: [
            $("select#q-1").val(),
            $("select#q-2").val(),
            $("select#q-3").val(),
            $("select#q-4").val(),
            $("select#q-5").val(),
            $("select#q-6").val(),
            $("select#q-7").val(),
            $("select#q-8").val(),
            $("select#q-9").val(),
            $("select#q-10").val()
          ]
        };
        // console.log(userData);

// AJAX post the data to the friends API.
$.post("/api/friends", userData, 
    function(data) {
            // console.log("worked")
    $("#match-name").text(data.name);
    $("#match-img").attr("src", data.photo);
// // Show the modal with the best match
    $("#results-modal").modal('toggle');
});
       } else {
        alert("Please fill out all fields before submitting!");
      }
    });

</script> 

</body>
</html>

<!-- // This line is the magic. It"s very similar to the standard ajax function we used.
// Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
// The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
// depending on if a tables is available or not.

// $.post("/api/tables", newReservation,
//   function(data) {

//     // If a table is available... tell user they are booked.
//     if (data) {
//       alert("Yay! You are officially booked!");
//     }

//     // If a table is available... tell user they on the waiting list.
//     else {
//       alert("Sorry you are on the wait list");
//     }

//     // Clear the form when submitting
//     $("#reserve-name").val("");
//     $("#reserve-phone").val("");
//     $("#reserve-email").val("");
//     $("#reserve-unique-id").val("");

  // }); 